# 代码结构

首先要学的是怎样编写代码块。

## 语句

语句是执行特定操作的语法结构和命令。

我们已经见过用来弹出提示信息的语句 `alert('Hello, world!')` 。

代码中可以有任意多的语句，不同的语句可以用分号分隔。

举个例子，这里我们把提示信息分成两个：

```js run no-beautify
alert('Hello'); alert('World');
```

通常来说每个语句写在单独的一行，这样代码更具可读性。

```js run no-beautify
alert('Hello');
alert('World');
```

## 分号

在大多数情况下，换行可以替代分号。

这样是可以的：

```js run no-beautify
alert('Hello')
alert('World')
```

这里 JavaScript 把换行当做隐式的分号，也就是所谓的 [自动插入分号](https://tc39.github.io/ecma262/#sec-automatic-semicolon-insertion) 特性。

**大多数情况下换行可以当做分号，但是并不是所有情况都这样**

有些情况下，换行并不意味着分号，例如：

```js run no-beautify
alert(3 +
1
+ 2);
```

这段代码会输出 `6`，因为在这里 JavaScript 没有自动插入分号。显然代码第一行以加号 `+` 结尾，说明表达式不完整、不需要加分号。在这种情况下，代码会跟预期的一样工作。

**但是也有一些情况下，JavaScript “错误地” 判断是否需要自动插入分号**

这种情况下发生的错误很难发现并修复。

````smart header="错误示例"
如果你好奇于这种错误的真实示例的话，看看下面这段代码：

```js run
[1, 2].forEach(alert)
```

暂时不用管 `[]` 和 `forEach` 的意思，这个之后会讲解，在这里不影响。记住这段代码的输出就好：依次弹出 `1` 和 `2`。

现在我们在这段代码之前加一个 `alert` 语句，并且 *不加* 分号。

```js run no-beautify
alert("There will be an error")

[1, 2].forEach(alert)
```

运行这段代码会发现：只有第一个 `alert` 弹出了，而且发生了一个错误。

但是如果我们在第一个 `alert` 后加一个分号，就正常了：

```js run
alert("All fine now");

[1, 2].forEach(alert)  
```

现在运行代码，会依次弹出 “All fine now”、`1`、`2`。

这个发生在没分号的时候的错误是因为 JavaScript 没有在中括号 `[...]` 前面自动加上分号。

所以，因为没有自动插入分号，这段代码其实是被当做一个语句来处理。来看看引擎是怎么处理的：

```js run no-beautify
alert("There will be an error")[1, 2].forEach(alert)
```

但是，这确实是两个独立的语句，而不是一个。这样连接起来造成了错误。除了以上示例，还有其它情况下也发生这样的错误，此处不一一列举。
````

推荐在不同语句间加上分号，即使已经换行分开。这是也是被社区广泛接受的准则。再强调一下： 大部分情况下确实 **可以** 不加分号，但是加上会更安全，特别是对新手而言。

## 注释

随着时间的推移，程序会变得越来越复杂，加上 *注释* 描述发生了什么以及原因就显得很有必要。

注释可以放在脚本的任意位置，它们不会影响程序运行，因为被引擎直接忽略。

**行注释以两个斜杠开始 `//` 。**

同行内接下来的内容都属于注释，可以单独一行或者跟在语句后面。

像这样：

```js run
// 单独一行注释
alert('Hello');

alert('World'); // 跟在语句后面的注释
```

**块注释以一个斜杠和星号开始 `/*`，以对称的星号斜杠结束 `*/`。**

像这样：

```js run
/* 示例信息：
这是块注释。
*/
alert('Hello');
alert('World');
```

注释内容会被忽略，即使我们在注释里写代码 ```/* ... */``` ，也不会被执行。

基于此特性，注释有时候用来暂时禁用部分代码：

```js run
/* 注释掉一行代码
alert('Hello');
*/
alert('World');
```

```smart header="使用快捷键！"
在大部分编辑器中，使用 `key:Ctrl+/` 快捷键把当前行设为行注释，使用 `key:Ctrl+Shift+/` 快捷键把所选区域设为块注释。在 Mac 上请用 `key:Cmd` 替代 `key:Ctrl` 。
```

````warn header="不支持嵌套注释!"
有时候，可能会出现 `/*...*/` 嵌套在其它 `/*...*/` 里面的情况。

这样的代码会抛出错误并终止运行：

```js run no-beautify
/*
  /* 嵌套注释 ?!? */
*/
alert( 'World' );
```
````

请不要犹豫于要不要写注释。

注释确实会增加代码文件大小，但这并不是什么问题。市面上有许多工具可以在发布代码之前帮你最小化代码。这些工具会删除注释，使之不出现在生产环境文件里。这样注释就不会对生产环境有任何负面影响。

接下来的教程里，会有专门的一个章节 <info:coding-style> 来讲解如何写好注释。
